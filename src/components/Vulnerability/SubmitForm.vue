<template>
  <div class="max-w5xl mx-auto border px-6 md:px-20 pt-28 transition-colors duration-300">
    <h1 class="text-3xl font-bold mb-6">Submit Vulnerability Report</h1>

    <form @submit.prevent="submitReport">
      <!-- Title Input -->
      <div class="mb-6">
        <label for="title" class="font-semibold">Title</label>
        <input
          type="text"
          id="title"
          v-model="title"
          class="w-full p-3 mt-2 border rounded-lg"
          required
        />
      </div>

      <!-- Severity Dropdown -->
      <div class="mb-6">
        <label for="severity" class="font-semibold">Severity</label>
        <select
          id="severity"
          v-model="severity"
          class="w-full p-3 mt-2 border rounded-lg"
        >
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
          <option value="critical">Critical</option>
        </select>
      </div>

      <!-- Steps to Reproduce -->
      <div class="mb-6">
        <label for="steps" class="font-semibold">Steps to Reproduce</label>
        <textarea
          id="steps"
          v-model="steps"
          class="w-full p-3 mt-2 border rounded-lg"
          rows="4"
          required
        ></textarea>
      </div>

      <!-- Attachments -->
      <div class="mb-6">
        <label for="attachments" class="font-semibold">Attachments</label>
        <input
          type="file"
          id="attachments"
          @change="handleFileChange"
          class="w-full p-3 mt-2 border rounded-lg"
        />
      </div>

      <!-- Categorization Component -->
      <Categorization />

      <!-- Submit Button -->
      <div>
        <button
          type="submit"
          class="w-full p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300"
        >
          Submit Report
        </button>
      </div>
    </form>
  </div>
</template>

<script>
import Categorization from './Categorization.vue';

export default {
  components: {
    Categorization
  },
  data() {
    return {
      title: '',
      severity: 'low',
      steps: '',
      attachments: null,
    };
  },
  methods: {
    handleFileChange(event) {
      this.attachments = event.target.files;
    },
    submitReport() {
      // Handle the report submission logic here
      console.log("Report Submitted:", {
        title: this.title,
        severity: this.severity,
        steps: this.steps,
        attachments: this.attachments,
      });
      // Reset the form after submission
      this.title = '';
      this.severity = 'low';
      this.steps = '';
      this.attachments = null;
    },
  },
};
</script>

<style scoped>
/* Ensure consistent styling with the rest of the app */
input, select, textarea {
  background-color: var(--bg-color);
  color: var(--text-color);
}

button {
  transition: background-color 0.2s ease;
}

button:hover {
  background-color: #4b7bec;
}

/* Dark & Light Mode Styles */
:root {
  --bg-color: #f9f9f9;
  --text-color: #000;
}

.dark-mode {
  --bg-color: #1e293b;
  --text-color: #fff;
}
</style>
